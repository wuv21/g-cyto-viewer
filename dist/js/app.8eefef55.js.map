{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?466e","webpack:///./src/App.vue?435c","webpack:///./src/graphs/scatterplot_canvas.js","webpack:///./src/graphs/polybrush.js","webpack:///src/App.vue","webpack:///./src/App.vue?5b92","webpack:///./src/App.vue?8ba3","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","model","callback","$$v","drawerRight","expression","staticClass","_v","directives","rawName","abs","absSearch","selAbs","staticStyle","group","pull","put","sort","_l","ab","absDisplayBool","domProps","_s","on","updateCells","selClusterTrack","clust","clusterCategoriesUniqCols","clusterCategoriesSel","headerFooterColor","title","$event","stopPropagation","onFileChange","orgDataClean","scopedSlots","_u","fn","cellsUsed","proxy","dimMethods","updateDimsAndCells","dimMethodSel","clusterCategories","updateClusterAndCells","dataPolyGate","currentDataClean","polyGateXAb","polyGateYAb","enableThresh","minThresh","maxThresh","expThresh","expColorScales","expColorScaleSel","clearAllExpScatter","staticRenderFns","ScatterPlot","height","width","xScale","d3","yScale","fillScale","fillVar","xTitle","yTitle","xVar","yVar","constrainAxes","radius","legend","margin","left","bottom","top","right","chart","selection","longestFillItem","domain","reduce","maxLen","chartHeight","chartWidth","each","type","ele","svg","selectAll","values","svgEnter","enter","append","attr","text","style","xAxis","yAxis","axesData","makePaddedDomain","valExtent","padScale","valRange","Math","paddedDomain","xExtent","range","yExtent","scale","select","transition","duration","detachedContainer","document","createElement","dataContainer","circles","dataBinding","join","barcode","update","exit","remove","canvasID","canvasNode","getElementById","canvasChart","context","node","getContext","drawCanvas","clearRect","canvas","fillStyle","beginPath","arc","PI","fill","closePath","arguments","polybrush","dispatch","el","x","y","extent","firstClick","firstTime","wasDragged","origin","line","brush","g","addAnchor","bg","e","scaleExtent","drawPath","start","stop","withinBounds","point","rangeX","rangeY","_x","max","min","_y","moveAnchor","target","mouse","w","moveExtent","_this","pop","dragExtent","scaleX","scaleY","fail","updateExtentPoint","checkBounds","forEach","dragStop","event","preventDefault","empty","isWithinExtent","polygonContains","z","clear","typename","icons","iconfont","components","watch","dataFile","header","dMat","split","arrayList","h","isNaN","a","allNth","parseFloat","Array","dataCiteKeys","clusterCategoriesCurrentVals","keys","clusterCategoriesUniqVals","map","makeMainScatter","drawColorScaleLegend","showSpinner","makeExpressionScatter","expressionData","makePolyGateScatter","checkPolyGateAb","prevVal","newVal","toLowerCase","indexOf","fillScales","methods","resetGraphs","reader","onload","readAsText","assign","$data","$options","nodeID","charts","brushG","draw","updatePolyGate","xvar","yvar","dataTemp","makeExpressionScatterData","data_ref","currentDataCleanFilt","cluster","new_d","xaxis","yaxis","final_data","updateCluster","genRandomIndices","prev","concat","filter","polyGateBrush","mainScatterXScale","mainScatterYScale","arr","devicePixelRatio","color","fillRect","component","VApp","VAppBar","VAppBarNavIcon","VAvatar","VBtn","VCard","VCardSubtitle","VCardText","VChip","VCol","VContainer","VDivider","VFileInput","VFooter","VIcon","VList","VListItem","VListItemContent","VListItemGroup","VListItemIcon","VListItemTitle","VMain","VNavigationDrawer","VProgressCircular","VRow","VSelect","VSlider","VSpacer","VSwitch","VTextField","VToolbarTitle","VToolbar","Vue","use","Vuetify","config","productionTip","vuetify","render","App","$mount"],"mappings":"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","file":"js/app.8eefef55.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/g-cyto-viewer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"gCytoViewer\"}},[_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\",\"right\":\"\"},model:{value:(_vm.drawerRight),callback:function ($$v) {_vm.drawerRight=$$v},expression:\"drawerRight\"}},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"title\"},[_vm._v(\"Antibodies\")])],1)],1),_c('v-list-item',[_c('v-text-field',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.abs.length != 0),expression:\"abs.length != 0\"}],staticClass:\"mt-2\",attrs:{\"label\":\"Search for abs\",\"dense\":\"\",\"clearable\":\"\"},model:{value:(_vm.absSearch),callback:function ($$v) {_vm.absSearch=$$v},expression:\"absSearch\"}})],1),_c('v-list',{attrs:{\"dense\":\"\",\"id\":\"antibody-list\"}},[_c('v-list-item-group',{attrs:{\"multiple\":true,\"color\":\"indigo\"},model:{value:(_vm.selAbs),callback:function ($$v) {_vm.selAbs=$$v},expression:\"selAbs\"}},[_c('draggable',{staticStyle:{\"min-height\":\"10px\"},attrs:{\"options\":{group: {name:'test', pull:'clone', put:false}, sort: false}},model:{value:(_vm.abs),callback:function ($$v) {_vm.abs=$$v},expression:\"abs\"}},_vm._l((_vm.abs),function(ab,i){return _c('v-list-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.absDisplayBool[i]),expression:\"absDisplayBool[i]\"}],key:(\"ab-\" + i)},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(ab)}})],1)],1)}),1)],1)],1),_c('v-divider'),_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"title\"},[_vm._v(\"Clusters\")])],1)],1),_c('v-list',{attrs:{\"dense\":\"\",\"id\":\"cluster-list\"}},[_c('v-list-item-group',{attrs:{\"multiple\":true,\"color\":\"red darken-2\"},on:{\"change\":_vm.updateCells},model:{value:(_vm.selClusterTrack),callback:function ($$v) {_vm.selClusterTrack=$$v},expression:\"selClusterTrack\"}},_vm._l((_vm.clusterCategoriesCurrentVals),function(clust,i){return _c('v-list-item',{key:(\"clust-\" + i),attrs:{\"value\":i}},[_c('v-list-item-icon',{staticClass:\"mr-3\"},[_c('v-icon',{attrs:{\"color\":(\"\" + (_vm.clusterCategoriesUniqCols[_vm.clusterCategoriesSel][i]))}},[_vm._v(\"mdi-checkbox-blank-circle\")])],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(clust)}})],1)],1)}),1)],1)],1),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-right\":\"\",\"color\":_vm.headerFooterColor,\"dark\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.title))]),_c('v-spacer'),_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawerRight = !_vm.drawerRight}}})],1),_c('v-main',[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-file-input',{attrs:{\"name\":\"hi\",\"accept\":\".tsv\",\"label\":\"Upload TSV data file\",\"truncate-length\":\"30\"},on:{\"change\":_vm.onFileChange}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSpinner),expression:\"showSpinner\"}]},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":_vm.headerFooterColor}}),_c('p',{staticClass:\"caption\"},[_vm._v(\"Loading...please wait\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.abs.length != 0),expression:\"abs.length != 0\"}]},[_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"indigo\",\"text-color\":\"white\"}},[_c('v-avatar',{attrs:{\"left\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-flask-empty\")])],1),_vm._v(\" \"+_vm._s(_vm.abs.length)+\" features \")],1),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"teal\",\"text-color\":\"white\"}},[_c('v-avatar',{attrs:{\"left\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-checkbox-blank-circle-outline\")])],1),_vm._v(\" \"+_vm._s(_vm.orgDataClean.length)+\" cells \")],1)],1)],1),_c('v-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.abs.length != 0),expression:\"abs.length != 0\"}],attrs:{\"cols\":\"8\",\"text-center\":\"\",\"justify-center\":\"\"}},[_c('p',{staticClass:\"title mb-0\"},[_vm._v(\"Dashboard settings\")]),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"5\"}},[_c('p',{staticClass:\"subtitle-2 mb-0\"},[_vm._v(\"Random cell filter\")]),_c('p',{staticClass:\"caption\"},[_vm._v(\"Recommended to de-select all antibodies first.\")]),_c('v-slider',{staticClass:\"align-center\",attrs:{\"max\":_vm.orgDataClean.length,\"min\":\"0\",\"hide-details\":\"\"},on:{\"input\":_vm.updateCells},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"ma-0 pa-0\",staticStyle:{\"width\":\"5em\"},attrs:{\"hide-details\":\"\",\"single-line\":\"\",\"max\":_vm.orgDataClean.length,\"min\":\"0\",\"type\":\"number\"},model:{value:(_vm.cellsUsed),callback:function ($$v) {_vm.cellsUsed=$$v},expression:\"cellsUsed\"}})]},proxy:true}]),model:{value:(_vm.cellsUsed),callback:function ($$v) {_vm.cellsUsed=$$v},expression:\"cellsUsed\"}})],1),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('p',{staticClass:\"subtitle-2\"},[_vm._v(\"Dimension reduction method\")]),_c('v-select',{attrs:{\"outlined\":\"\",\"items\":_vm.dimMethods,\"disabled\":_vm.dimMethods.length == 1,\"dense\":\"\",\"label\":\"Select method\"},on:{\"input\":_vm.updateDimsAndCells},model:{value:(_vm.dimMethodSel),callback:function ($$v) {_vm.dimMethodSel=$$v},expression:\"dimMethodSel\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('p',{staticClass:\"subtitle-2\"},[_vm._v(\"Cluster category\")]),_c('v-select',{attrs:{\"outlined\":\"\",\"items\":_vm.clusterCategories,\"disabled\":_vm.clusterCategories.length == 1,\"dense\":\"\",\"label\":\"Select category\"},on:{\"input\":_vm.updateClusterAndCells},model:{value:(_vm.clusterCategoriesSel),callback:function ($$v) {_vm.clusterCategoriesSel=$$v},expression:\"clusterCategoriesSel\"}})],1)],1)],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.abs.length != 0),expression:\"abs.length != 0\"}],attrs:{\"align\":\"start\",\"justify\":\"space-around\"}},[_c('v-col',{attrs:{\"cols\":\"6\",\"text-center\":\"\",\"justify-center\":\"\"}},[_c('p',{staticClass:\"title mb-0\"},[_vm._v(\"Colored by cluster\")]),_c('p',{staticClass:\"caption\"},[_vm._v(\"To start, click on graph to place anchors for gating. Double click to finish and to allow gate dragging. \"),_c('br'),_vm._v(\" To reset, click outside to start drawing new gate.\")]),_c('p',{staticClass:\"subtitle-1 mb-0\"},[_vm._v(\"Polygonal gate details\")]),_c('p',{staticClass:\"caption mb-0\"},[_vm._v(\"Current polygonal gate: \"+_vm._s(_vm.dataPolyGate.length)+\" cells selected of \"+_vm._s(_vm.currentDataClean.length)+\" cells shown on graph\")]),_c('p',{staticClass:\"caption mt-0 pt-0\"},[_vm._v(_vm._s(_vm.cellsUsed - _vm.currentDataClean.length)+\" cells are not shown based on current cluster selection\")]),_c('div',{attrs:{\"id\":\"mainScatter\"}})]),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('p',{staticClass:\"title mb-0\"},[_vm._v(\"Polygonal gate\")]),_c('p',{staticClass:\"caption\"},[_vm._v(\"Drag and drop antibodies from right panel to the below boxes.\")]),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"outlined\":\"\"}},[_c('v-card-subtitle',{staticClass:\"pb-0\"},[_vm._v(\"x-axis antibody\")]),_c('draggable',{staticStyle:{\"min-height\":\"15px\"},attrs:{\"options\":{group: {name:'test', pull:'clone'}, sort: false}},model:{value:(_vm.polyGateXAb),callback:function ($$v) {_vm.polyGateXAb=$$v},expression:\"polyGateXAb\"}},_vm._l((_vm.polyGateXAb),function(ab,i){return _c('v-card-text',{key:(\"x-\" + i),staticClass:\"py-2\"},[_c('div',{domProps:{\"textContent\":_vm._s(ab)}})])}),1)],1)],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"outlined\":\"\"}},[_c('v-card-subtitle',{staticClass:\"pb-0\"},[_vm._v(\"y-axis antibody\")]),_c('draggable',{staticStyle:{\"min-height\":\"15px\"},attrs:{\"options\":{group: {name:'test', pull:'clone'}, sort: false}},model:{value:(_vm.polyGateYAb),callback:function ($$v) {_vm.polyGateYAb=$$v},expression:\"polyGateYAb\"}},_vm._l((_vm.polyGateYAb),function(ab,i){return _c('v-card-text',{key:(\"y-\" + i),staticClass:\"py-2\"},[_c('div',{domProps:{\"textContent\":_vm._s(ab)}})])}),1)],1)],1)],1),_c('div',{attrs:{\"id\":\"polyGateScatter\"}})],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.abs.length != 0),expression:\"abs.length != 0\"}]},[_c('v-col',{attrs:{\"text-center\":\"\",\"justify-center\":\"\"}},[_c('p',{staticClass:\"title mb-0\"},[_vm._v(\"Colored by scaled expression level\")]),_c('v-row',[_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"6\"}},[_c('v-switch',{attrs:{\"label\":\"Enable threshold filter\"},model:{value:(_vm.enableThresh),callback:function ($$v) {_vm.enableThresh=$$v},expression:\"enableThresh\"}}),_c('v-slider',{attrs:{\"label\":\"Threshold\",\"hint\":\"Select antibodies on right panel. Can enable minimum threshold filter to increase app responsiveness.\",\"persistent-hint\":\"\",\"thumb-label\":\"always\",\"thumb-size\":24,\"disabled\":!_vm.enableThresh,\"min\":_vm.minThresh,\"max\":_vm.maxThresh,\"step\":\"0.1\",\"type\":\"number\"},model:{value:(_vm.expThresh),callback:function ($$v) {_vm.expThresh=$$v},expression:\"expThresh\"}})],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"4\"}},[_c('v-select',{attrs:{\"outlined\":\"\",\"items\":_vm.expColorScales,\"dense\":\"\",\"label\":\"Select color scale (low - high)\"},model:{value:(_vm.expColorScaleSel),callback:function ($$v) {_vm.expColorScaleSel=$$v},expression:\"expColorScaleSel\"}})],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"8\"}},[_c('div',{attrs:{\"id\":\"expColorLegend\"}})])],1),_c('v-row',{staticClass:\"mb-0\"},[_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"6\"}},[_c('v-btn',{attrs:{\"color\":\"normal\",\"disabled\":_vm.selAbs.length == 0},on:{\"click\":_vm.clearAllExpScatter}},[_vm._v(\"Clear all expression plots\")])],1)],1)],1)],1),_c('div',{attrs:{\"id\":\"expressionScatter\"}})],1)],1)],1)],1),_c('v-footer',{staticClass:\"white--text\",attrs:{\"app\":\"\",\"color\":_vm.headerFooterColor}},[_c('span',[_vm._v(\"Vincent Wu | Betts Lab\")]),_c('v-spacer'),_c('span',[_vm._v(\"Updated 2020.10.11\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// modified from mike freeman's code on reusability\n// https://github.com/info474-s17/m15-reusability/tree/complete/demo-4\n\nimport * as d3 from \"d3\";\n\nexport default function ScatterPlot() {\n    // Set default values\n    let height = 500,\n        width = 500,\n        xScale = d3.scaleLinear(),\n        yScale = d3.scaleLinear(),\n        fillScale = \"\",\n        fillVar = \"\",\n        xTitle = 'x axis',\n        yTitle = 'y axis',\n        xVar = \"\",\n        yVar = \"\",\n        title = 'Chart title',\n        constrainAxes = null,\n        radius = 2,\n        legend = false,\n        margin = {\n            left: 70,\n            bottom: 50,\n            top: 30,\n            right: 10,\n        };\n\n    // Function returned by ScatterPlot\n    function chart(selection) {\n        // margin adjustment if legend setting is on\n        // TODO allow for more responsive setting based on how long fill identity text is...\n        if (legend && fillScale != \"\") {\n            const longestFillItem = fillScale.domain()\n                .reduce((maxLen, d) => d.length > maxLen ? d.length : maxLen, 0);\n\n            margin.right = margin.right + longestFillItem * 6.5;\n            width = height + longestFillItem * 6.5;\n        }\n\n        // Height/width of the drawing area itself\n        const chartHeight = height - margin.bottom - margin.top;\n        const chartWidth = width - margin.left - margin.right;\n\n        // Iterate through selections, in case there are multiple\n        selection.each(function(data) {\n            // set up title\n            title = data.title;\n\n            if (data.type === \"expression\") {\n                fillVar = \"expression\";\n                fillScale = data.fillScale;\n            }\n\n            // Use the data-join to create the svg (if necessary)\n            const ele = d3.select(this);\n            const svg = ele.selectAll(\"svg\").data([data.values]);\n\n            // Append static elements (i.e., only added once)\n            const svgEnter = svg.enter()\n                .append(\"svg\")\n                .attr('width', width)\n                .attr(\"height\", height)\n                .attr('class', 'chart-svg')\n\n            // Title G\n            svgEnter.append('text')\n                .attr('transform', 'translate(' + (margin.left + chartWidth / 2) + ',' + 30 + ')')\n                .text(title)\n                .attr('class', 'chart-title')\n                .style('text-anchor', 'middle')\n\n            // g element for markers\n            svgEnter.append('g')\n                .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n                .attr(\"class\", 'scatterG');\n\n            // Append axes to the svgEnter element\n            svgEnter.append('g')\n                .attr('transform', 'translate(' + margin.left + ',' + (chartHeight + margin.top) + ')')\n                .attr('class', 'axis x');\n\n            svgEnter.append('g')\n                .attr('transform', 'translate(' + margin.left + ',' + (margin.top) + ')')\n                .attr('class', 'axis y')\n\n            // Add a title g for the x axis\n            svgEnter.append('text')\n                .attr('transform', 'translate(' + (margin.left + chartWidth / 2) + ',' + (chartHeight + margin.top + 40) + ')')\n                .attr('class', 'axis-title x');\n\n            // Add a title g for the y axis\n            svgEnter.append('text')\n                .attr('transform', 'translate(' + (margin.left - 40) + ',' + (margin.top + chartHeight / 2) + ') rotate(-90)')\n                .attr('class', 'axis-title y');\n\n            // Add legend if settings are enabled for this\n            // Legend derived from http://bl.ocks.org/weiglemc/6185069\n            // TODO legend not updating correctly\n            // if (legend && fillScale != \"\") {\n            //     svgEnter.append('g')\n            //         .attr('transform', 'translate(' + (width - margin.right - 30) + ',' + margin.top + ')')\n            //         .attr('class', 'legend');\n\n            //     ele.select('.legend').selectAll('.legend-g')\n            //         .data(fillScale.domain().sort(), (d) => fillVar + d)\n            //         .join(\n            //             enter => {\n            //                 console.log(enter);\n            //                 enter = enter.append(\"g\")\n            //                 .attr('class', 'legend-g')\n            //                 .attr(\"transform\", (d, i) => \"translate(0,\" + i * 20 + \")\")\n                            \n            //                 enter.append(\"rect\")\n            //                 .attr(\"x\", 5)\n            //                 .attr(\"width\", 12)\n            //                 .attr(\"height\", 12)\n            //                 .style(\"fill\", fillScale);\n\n            //                 enter.append(\"text\")\n            //                     .attr(\"x\", 25)\n            //                     .attr(\"y\", 6)\n            //                     .attr(\"dy\", \".35em\")\n            //                     .style(\"text-anchor\", \"start\")\n            //                     .style(\"font-size\", 12)\n            //                     .text((d) => d)\n                            \n            //                 return(enter)\n            //             },\n            //             exit => exit.remove());\n            // }\n\n            // Define xAxis and yAxis functions\n            const xAxis = d3.axisBottom();\n            const yAxis = d3.axisLeft();\n\n            // Calculate x and y scales\n            let axesData = null;\n            if (constrainAxes != null) {\n                axesData = constrainAxes;\n            } else {\n                axesData = data.values;\n            }\n\n            function makePaddedDomain(valExtent, padScale) {\n                const valRange = Math.abs(valExtent[1] - valExtent[0])\n\n                const paddedDomain = [valExtent[0] - (valRange * padScale), valExtent[1] + (valRange * padScale)]\n                return (paddedDomain);\n            }\n\n            const padScale = 0.1;\n\n            const xExtent = d3.extent(axesData, (d) => +d[xVar]);\n            xScale.range([0, chartWidth]).domain(makePaddedDomain(xExtent, padScale));\n\n            const yExtent = d3.extent(axesData, (d) => +d[yVar]);\n            yScale.range([chartHeight, 0]).domain(makePaddedDomain(yExtent, padScale));\n\n            // Update axes\n            xAxis.scale(xScale);\n            yAxis.scale(yScale);\n            ele.select('.axis.x').transition().duration(1000).call(xAxis);\n            ele.select('.axis.y').transition().duration(1000).call(yAxis);\n\n            // Update titles\n            ele.select('.axis-title.x').text(xTitle);\n            ele.select('.axis-title.y').text(yTitle);\n\n            var detachedContainer = document.createElement(\"custom\");\n            var dataContainer = d3.select(detachedContainer);\n\n            // // Draw markers\n            const circles = dataContainer.selectAll('circle').data(data.values, (d) => d[\"barcode\"]);\n\n            // Use the .enter() method to get entering elements, and assign initial position\n            const dataBinding = circles.join(\n                enter => enter.append('circle')\n                    .attr('fill', (d) => fillScale(d[fillVar]))\n                    .style('opacity', .8)\n                    .attr('cx', (d) => xScale(d[xVar]))\n                    .attr('cy', (d) => yScale(d[yVar]))\n                    .attr('r', radius)\n                    .attr(\"id\", (d) => d.barcode),\n                update => update\n                    .attr('fill', (d) => fillScale(d[fillVar]))\n                    .attr('cx', (d) => xScale(d[xVar]))\n                    .attr('cy', (d) => yScale(d[yVar])),\n                exit => exit.remove()\n            );\n            \n            const canvasID = \"canvas-\" + data.key;\n            const canvasNode = document.getElementById(canvasID);\n            let canvasChart = null;\n\n            if (canvasNode === null) {\n                canvasChart = d3.select(this).append('canvas')\n                    .attr('width', width - margin.left - margin.right)\n                    .attr('height', height - margin.bottom - margin.top)\n                    .style('margin-left', margin.left + 'px')\n                    .style('margin-right', margin.right + 'px')\n                    .style('margin-bottom', margin.bottom + 'px')\n                    .style('margin-top', margin.top + 'px')\n                    .attr('class', 'canvas-plot')\n                    .attr('id', canvasID);\n            } else {\n                canvasChart = d3.select(document.getElementById(canvasID));\n            }\n\n            const context = canvasChart.node().getContext('2d');\n\n            function drawCanvas() {\n                context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n                dataBinding.each(function() {\n                    //Select one of the nodes/circles\n                    var node = d3.select(this);\n    \n                    //Draw each circle\n                    context.fillStyle = node.attr(\"fill\");\n                    context.beginPath();\n                    context.arc(node.attr(\"cx\"), node.attr(\"cy\"), node.attr(\"r\"), 0, 2 * Math.PI, true);\n                    context.fill();\n                    context.closePath();\n                });\n            }\n\n            drawCanvas();\n        });\n    }\n\n    // Getter/setter methods to change locally scoped options\n    chart.height = function (value) {\n        if (!arguments.length) return height;\n        height = value;\n        return chart;\n    };\n\n    chart.width = function (value) {\n        if (!arguments.length) return width;\n        width = value;\n        return chart;\n    };\n\n    chart.margin = function (value) {\n        if (!arguments.length) return margin;\n        margin = value;\n        return chart;\n    };\n\n    chart.xTitle = function (value) {\n        if (!arguments.length) return xTitle;\n        xTitle = value;\n        return chart;\n    };\n\n    chart.yTitle = function (value) {\n        if (!arguments.length) return yTitle;\n        yTitle = value;\n        return chart;\n    };\n    chart.radius = function (value) {\n        if (!arguments.length) return radius;\n        radius = value;\n        return chart;\n    };\n    chart.xVar = function (value) {\n        if (!arguments.length) return xVar;\n        xVar = value;\n        return chart;\n    };\n    chart.yVar = function (value) {\n        if (!arguments.length) return yVar;\n        yVar = value;\n        return chart;\n    };\n    chart.xScale = function (value) {\n        if (!arguments.length) return xScale;\n        xScale = value;\n        return chart;\n    };\n    chart.yScale = function (value) {\n        if (!arguments.length) return yScale;\n        yScale = value;\n        return chart;\n    };\n    chart.fillVar = function (value) {\n        if (!arguments.length) return fillVar;\n        fillVar = value;\n        return chart;\n    };\n    chart.fillScale = function (value) {\n        if (!arguments.length) return fillScale;\n        fillScale = value;\n        return chart;\n    };\n    chart.constrainAxes = function (value) {\n        if (!arguments.length) return constrainAxes;\n        constrainAxes = value;\n        return chart;\n    };\n    chart.legend = function (value) {\n        if (!arguments.length) return legend;\n        legend = value;\n        return chart;\n    };\n    return chart;\n}","/*\nCopyright (c) 2012 Geoffrey T. Bell\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// Modified from http://bl.ocks.org/junwang23/bfcf242c09f0aaa0d6a27cdc84285a8e\n\nimport * as d3 from \"d3\";\n\n(function(d3) {\n    d3.polybrush = function() {\n        const dispatch = d3.dispatch(\"start\", \"brush\", \"end\");\n\n        let el = null,\n            x = null,\n            y = null,\n            extent = [],\n            firstClick = true,\n            firstTime = true,\n            wasDragged = false,\n            origin = null\n\n        const line = d3.line()\n            .x((d) => d[0])\n            .y((d) => d[1]);\n\n        function brush(g) {\n            el = g;\n            g.each(function() {\n                const g = d3.select(this)\n                    .style(\"pointer-events\", \"all\")\n                    .on(\"click.brush\", addAnchor);\n\n                const bg = g.selectAll(\".background\")\n                    .data([0]).enter()\n                    .append(\"rect\")\n                    .attr(\"class\", \"background\")\n                    .style(\"visibility\", \"hidden\")\n                    .style(\"cursor\", \"crosshair\");\n\n                g.selectAll(\".extent\")\n                    .data([extent]).enter()\n                    .append(\"path\")\n                    .attr(\"class\", \"extent\")\n                    .attr(\"opacity\", 0.2)\n                    .style(\"cursor\", \"move\");\n\n                if (x) {\n                    const e = scaleExtent(x.range());\n                    bg.attr(\"x\", e[0]).attr(\"width\", e[1] - e[0]);\n                }\n                if (y) {\n                    const e = scaleExtent(y.range());\n                    bg.attr(\"y\", e[0]).attr(\"height\", e[1] - e[0]);\n                }\n            });\n        }\n\n        function drawPath() {\n            return el.each(function() {\n                d3.select(this)\n                    .selectAll(\"g path\").attr(\"d\", function(d) {\n                        return line(d) + \"Z\";\n                    });\n            });\n        }\n\n        function scaleExtent(domain) {\n            const start = domain[0];\n            const stop = domain[domain.length - 1];\n            if (start < stop) {\n                return [start, stop];\n            } else {\n                return [stop, start];\n            }\n        }\n\n        function withinBounds(point) {\n            const rangeX = scaleExtent(x.range());\n            const rangeY = scaleExtent(y.range());\n            const _x = Math.max(rangeX[0], Math.min(rangeX[1], point[0]));\n            const _y = Math.max(rangeY[0], Math.min(rangeY[1], point[1]));\n\n            return point[0] === _x && point[1] === _y;\n        }\n\n        function moveAnchor(target) {\n            const point = d3.mouse(target);\n            if (firstTime) {\n                extent.push(point);\n                firstTime = false;\n            } else {\n                if (withinBounds(point)) {\n                    extent.splice(extent.length - 1, 1, point);\n                }\n                drawPath();\n                dispatch.call(\"brush\", this);\n            }\n        }\n\n        function closePath() {\n            const w = d3.select(window);\n            w.on(\"dblclick.brush\", null).on(\"mousemove.brush\", null);\n\n            firstClick = true;\n            if (extent.length === 2 && extent[0][0] === extent[1][0] && extent[0][1] === extent[1][1]) {\n                extent.splice(0, extent.length);\n            }\n\n            d3.select(\".extent\").on(\"mousedown.brush\", moveExtent);\n            \n            return dispatch.call(\"end\", this);\n        }\n\n        function addAnchor() {\n            const _this = this;\n            const w = d3.select(window);\n            firstTime = true;\n\n            if (wasDragged) {\n                wasDragged = false;\n                return;\n            }\n            if (firstClick) {\n                extent.splice(0, extent.length);\n                firstClick = false;\n                \n                d3.select(\".extent\").on(\"mousedown.brush\", null);\n                \n                w.on(\"mousemove.brush\", () => moveAnchor(_this))\n                    .on(\"dblclick.brush\", closePath);\n\n                dispatch.call(\"start\", this);\n            }\n            if (extent.length > 1) {\n                extent.pop();\n            }\n            extent.push(d3.mouse(this));\n            return drawPath();\n        }\n\n         function dragExtent(target) {\n            const point = d3.mouse(target);\n            const scaleX = point[0] - origin[0];\n            const scaleY = point[1] - origin[1];\n            let fail = false;\n\n            origin = point;\n            \n            function updateExtentPoint(p) {\n                p[0] += scaleX;\n                p[1] += scaleY;\n            }\n\n            extent.forEach((p) => {\n                updateExtentPoint(p);\n            });\n\n            function checkBounds(p) {\n                if (!withinBounds(p)) {\n                    fail = true;\n                }\n                return fail;\n            }\n\n            extent.forEach((p) => {\n                checkBounds(p);\n            });\n\n            if (fail) {\n                return;\n            }\n\n            drawPath();\n            return dispatch.call(\"brush\", this, {\n                mode: \"move\"\n            });\n        }\n\n        function dragStop() {\n            var w;\n            w = d3.select(window);\n            w.on(\"mousemove.brush\", null).on(\"mouseup.brush\", null);\n            wasDragged = true;\n            return dispatch.call(\"end\", this);\n        }\n\n        function moveExtent() {\n            var _this = this;\n            d3.event.stopPropagation();\n            d3.event.preventDefault();\n            if (firstClick && !brush.empty()) {\n                d3.select(window).on(\"mousemove.brush\", function() {\n                    return dragExtent(_this);\n                }).on(\"mouseup.brush\", dragStop);\n                origin = d3.mouse(this);\n            }\n        }\n\n        brush.isWithinExtent = function(x, y) {\n            return d3.polygonContains(extent, [x, y]);\n        };\n\n        brush.x = function(z) {\n            if (!arguments.length) {\n                return x;\n            }\n            x = z;\n            return brush;\n        };\n\n        brush.y = function(z) {\n            if (!arguments.length) {\n                return y;\n            }\n            y = z;\n            return brush;\n        };\n\n        brush.extent = function(z) {\n            if (!arguments.length) {\n                return extent;\n            }\n            extent = z;\n            return brush;\n        };\n\n        brush.clear = function() {\n            extent.splice(0, extent.length);\n            return brush;\n        };\n        \n        brush.empty = function() {\n            return extent.length === 0;\n        };\n\n        brush.on = function(typename, callback) {\n            dispatch.on(typename, callback);\n            return brush;\n        };\n\n        return brush;\n    };\n})(d3);","<template>\n  <v-app id=\"gCytoViewer\">\n    <v-navigation-drawer v-model=\"drawerRight\" app clipped right>\n      <v-list-item>\n        <v-list-item-content>\n          <v-list-item-title class=\"title\">Antibodies</v-list-item-title>\n        </v-list-item-content>\n      </v-list-item>\n\n      <v-list-item>\n        <v-text-field\n          class=\"mt-2\"\n          v-model=\"absSearch\"\n          label=\"Search for abs\"\n          v-show=\"abs.length != 0\"\n          dense\n          clearable\n        ></v-text-field>\n      </v-list-item>\n\n      <v-list dense id=\"antibody-list\">\n        <v-list-item-group v-model=\"selAbs\" :multiple=\"true\" color=\"indigo\">\n          <draggable\n            v-model=\"abs\"\n            :options=\"{group: {name:'test', pull:'clone', put:false}, sort: false}\"\n            style=\"min-height:10px\"\n          >\n            <v-list-item v-for=\"(ab, i) in abs\" :key=\"`ab-${i}`\" v-show=\"absDisplayBool[i]\">\n              <v-list-item-content>\n                <v-list-item-title v-text=\"ab\"></v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n          </draggable>\n        </v-list-item-group>\n      </v-list>\n\n      <v-divider></v-divider>\n\n      <v-list-item>\n        <v-list-item-content>\n          <v-list-item-title class=\"title\">Clusters</v-list-item-title>\n        </v-list-item-content>\n      </v-list-item>\n\n      <v-list dense id=\"cluster-list\">\n        <v-list-item-group\n          v-model=\"selClusterTrack\" :multiple=\"true\" color=\"red darken-2\" @change=\"updateCells\">\n            <v-list-item\n              v-for=\"(clust, i) in clusterCategoriesCurrentVals\"\n              :key=\"`clust-${i}`\"\n              :value=\"i\"\n            >\n              <v-list-item-icon class=\"mr-3\">\n                <v-icon\n                  :color=\"`${clusterCategoriesUniqCols[clusterCategoriesSel][i]}`\"\n                >mdi-checkbox-blank-circle</v-icon>\n              </v-list-item-icon>\n\n              <v-list-item-content>\n\n                <v-list-item-title v-text=\"clust\"></v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </v-navigation-drawer>\n\n    <v-app-bar app clipped-right :color=\"headerFooterColor\" dark>\n      <v-toolbar-title>{{title}}</v-toolbar-title>\n      <v-spacer />\n      <v-app-bar-nav-icon @click.stop=\"drawerRight = !drawerRight\" />\n    </v-app-bar>\n\n    <v-main>\n      <v-container fluid>\n        <v-row>\n          <v-col cols=\"4\">\n            <v-file-input\n              name=\"hi\"\n              accept=\".tsv\"\n              label=\"Upload TSV data file\"\n              @change=\"onFileChange\"\n              truncate-length=\"30\"\n            ></v-file-input>\n\n            <div v-show=\"showSpinner\">\n              <v-progress-circular\n                indeterminate\n                :color=\"headerFooterColor\"\n              ></v-progress-circular>\n              <p class=\"caption\">Loading...please wait</p>\n            </div>\n\n\n            <div v-show=\"abs.length != 0\">\n              <v-chip class=\"ma-2\" color=\"indigo\" text-color=\"white\">\n                <v-avatar left>\n                  <v-icon>mdi-flask-empty</v-icon>\n                </v-avatar>\n                {{abs.length}} features\n              </v-chip>\n\n              <v-chip class=\"ma-2\" color=\"teal\" text-color=\"white\">\n                <v-avatar left>\n                  <v-icon>mdi-checkbox-blank-circle-outline</v-icon>\n                </v-avatar>\n                {{orgDataClean.length}} cells\n              </v-chip>\n            </div>\n          </v-col>\n\n          <v-col v-show=\"abs.length != 0\" cols=\"8\" text-center justify-center>\n            <p class=\"title mb-0\">Dashboard settings</p>\n            <v-row>\n              <v-col cols=\"5\">\n                <p class=\"subtitle-2 mb-0\">Random cell filter</p>\n                <p class=\"caption\">Recommended to de-select all antibodies first.</p>\n                <v-slider\n                  v-model=\"cellsUsed\"\n                  class=\"align-center\"\n                  @input=\"updateCells\"\n                  :max=\"orgDataClean.length\"\n                  min=\"0\"\n                  hide-details\n                >\n                  <template v-slot:append>\n                    <v-text-field\n                      v-model=\"cellsUsed\"\n                      class=\"ma-0 pa-0\"\n                      hide-details\n                      single-line\n                      :max=\"orgDataClean.length\"\n                      min=\"0\"\n                      type=\"number\"\n                      style=\"width: 5em;\"\n                    ></v-text-field>\n                  </template>\n                </v-slider>\n              </v-col>\n\n              <v-col cols=\"3\">\n                <p class=\"subtitle-2\">Dimension reduction method</p>\n                <v-select\n                  outlined\n                  :items=\"dimMethods\"\n                  :disabled=\"dimMethods.length == 1\"\n                  v-model=\"dimMethodSel\"\n                  @input=\"updateDimsAndCells\"\n                  dense\n                  label=\"Select method\"\n                ></v-select>\n              </v-col>\n\n              <v-col cols=\"4\">\n                <p class=\"subtitle-2\">Cluster category</p>\n                <v-select\n                  outlined\n                  :items=\"clusterCategories\"\n                  :disabled=\"clusterCategories.length == 1\"\n                  v-model=\"clusterCategoriesSel\"\n                  @input=\"updateClusterAndCells\"\n                  dense\n                  label=\"Select category\"\n                ></v-select>\n              </v-col>\n            </v-row>\n          </v-col>\n        </v-row>\n\n        <v-row align=\"start\" justify=\"space-around\" v-show=\"abs.length != 0\">\n          <v-col cols=\"6\" text-center justify-center>\n            <p class=\"title mb-0\">Colored by cluster</p>\n            <p\n              class=\"caption\"\n            >To start, click on graph to place anchors for gating. Double click to finish and to allow gate dragging. <br> To reset, click outside to start drawing new gate.</p>\n            <p class=\"subtitle-1 mb-0\">Polygonal gate details</p>\n            <p\n              class=\"caption mb-0\"\n            >Current polygonal gate: {{dataPolyGate.length}} cells selected of {{currentDataClean.length}} cells shown on graph</p>\n            <p\n              class=\"caption mt-0 pt-0\"\n            >{{cellsUsed - currentDataClean.length}} cells are not shown based on current cluster selection</p>\n            <div id=\"mainScatter\"></div>\n          </v-col>\n\n          <v-col cols=\"6\">\n            <p class=\"title mb-0\">Polygonal gate</p>\n            <p class=\"caption\">Drag and drop antibodies from right panel to the below boxes.</p>\n            <v-row>\n              <v-col cols=\"6\">\n                <v-card class=\"mx-auto\" outlined>\n                  <v-card-subtitle class=\"pb-0\">x-axis antibody</v-card-subtitle>\n                  <draggable\n                    v-model=\"polyGateXAb\"\n                    :options=\"{group: {name:'test', pull:'clone'}, sort: false}\"\n                    style=\"min-height: 15px\"\n                  >\n                    <v-card-text v-for=\"(ab, i) in polyGateXAb\" :key=\"`x-${i}`\" class=\"py-2\">\n                      <div v-text=\"ab\"></div>\n                    </v-card-text>\n                  </draggable>\n                </v-card>\n              </v-col>\n\n              <v-col cols=\"6\">\n                <v-card class=\"mx-auto\" outlined>\n                  <v-card-subtitle class=\"pb-0\">y-axis antibody</v-card-subtitle>\n                  <draggable\n                    v-model=\"polyGateYAb\"\n                    :options=\"{group: {name:'test', pull:'clone'}, sort: false}\"\n                    style=\"min-height: 15px\"\n                  >\n                    <v-card-text v-for=\"(ab, i) in polyGateYAb\" :key=\"`y-${i}`\" class=\"py-2\">\n                      <div v-text=\"ab\"></div>\n                    </v-card-text>\n                  </draggable>\n                </v-card>\n              </v-col>\n            </v-row>\n\n            <div id=\"polyGateScatter\"></div>\n          </v-col>\n        </v-row>\n\n        <v-row v-show=\"abs.length != 0\">\n          <v-col text-center justify-center>\n            <p class=\"title mb-0\">Colored by scaled expression level</p>\n\n            <v-row>\n              <v-col cols=\"6\" class=\"pt-0\">\n                <v-switch label=\"Enable threshold filter\" v-model=\"enableThresh\"></v-switch>\n                <v-slider\n                  v-model=\"expThresh\"\n                  label=\"Threshold\"\n                  hint=\"Select antibodies on right panel. Can enable minimum threshold filter to increase app responsiveness.\"\n                  persistent-hint\n                  thumb-label=\"always\"\n                  :thumb-size=\"24\"\n                  :disabled=\"!enableThresh\"\n                  :min=\"minThresh\"\n                  :max=\"maxThresh\"\n                  step=\"0.1\"\n                  type=\"number\"\n                ></v-slider>\n              </v-col>\n              \n              <v-col cols=\"6\">\n                <v-row>\n                  <v-col cols=\"4\" class=\"pb-0\">\n                    <v-select\n                      outlined\n                      :items=\"expColorScales\"\n                      v-model=\"expColorScaleSel\"\n                      dense\n                      label=\"Select color scale (low - high)\"\n                    ></v-select>\n                  </v-col>\n\n                  <v-col cols=\"8\" class=\"pb-0\">\n                    <div id=\"expColorLegend\"></div>\n                  </v-col>                              \n                </v-row>\n\n                <v-row class=\"mb-0\">\n                  <v-col cols=\"6\" class=\"pt-0\">\n                    <v-btn\n                      color=\"normal\"\n                      :disabled=\"selAbs.length == 0\"\n                      @click=\"clearAllExpScatter\"\n                    >Clear all expression plots</v-btn>\n                  </v-col>                    \n                </v-row>\n              </v-col>\n            </v-row>\n\n            <div id=\"expressionScatter\"></div>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-main>\n\n    <v-footer app :color=\"headerFooterColor\" class=\"white--text\">\n      <span>Vincent Wu | Betts Lab</span>\n      <v-spacer />\n      <span>Updated 2020.10.11</span>\n    </v-footer>\n  </v-app>\n</template>\n\n<script>\nimport \"@mdi/font/css/materialdesignicons.css\";\nimport draggable from \"vuedraggable\";\nimport * as d3 from \"d3\";\nimport _ from \"lodash\";\nimport ScatterPlot from \"./graphs/scatterplot_canvas.js\";\nimport \"./graphs/polybrush.js\";\n\nconst availInterpolators = {\n  \"Spectral (Red - Blue)\": d3.interpolateSpectral,\n  \"Purple - Green\": d3.interpolatePRGn,\n  \"White - Red\": d3.interpolateReds,\n  \"White - Blue\": d3.interpolateBlues,\n};\n\nexport default {\n  name: \"gCytoViewer\",\n  icons: {\n    iconfont: \"mdi\"\n  },\n  components: { draggable: draggable },\n  data: () => ({\n    drawerRight: null,\n    title: \"gCytoViewer\",\n    headerFooterColor: \"blue-grey\",\n    dataFile: null,\n    header: [],\n    abs: [],\n    selAbs: [],\n    selClusterTrack: [],\n    absSearch: null,\n    absDisplayBool: [],\n    dataCite: [],\n    orgDataClean: [],\n    currentDataClean: [],\n    dataPolyGate: [],\n    polyGateXAb: [],\n    polyGateYAb: [],\n    polyGateBrush: null,\n    mainScatterXScale: null,\n    mainScatterYScale: null,\n    fillScales: [],\n    absDensities: [],\n    enableThresh: false,\n    expThresh: 0,\n    minThresh: 0,\n    maxThresh: 2, // will need to edit for flow datasets\n    cellsUsed: 0,\n    dimMethods: [],\n    dimMethodSel: null,\n    clusterCategories: [],\n    clusterCategoriesSel: null,\n    clusterCategoriesUniqVals: {},\n    clusterCategoriesScales: {},\n    clusterCategoriesUniqCols: {},\n    clusterCategoriesCurrentVals: [],\n    showSpinner: false,\n    expColorScales: Object.keys(availInterpolators),\n    expColorScaleSel: Object.keys(availInterpolators)[0],\n  }),\n\n  watch: {\n    dataFile(d) {\n      if (!d) {\n        return;\n      }\n\n      let dMat = d.split(\"\\n\");\n      this.header = dMat[0].split(\"\\t\");\n\n      dMat = _.map(dMat, x => {\n        return x.split(\"\\t\");\n      });\n\n      // check last row\n      if (dMat[dMat.length - 1].length == 1) {\n        dMat.pop();\n      }\n\n      const getNth = function(arrayList, n, h) {\n        const allNth = [];\n\n        arrayList.forEach(a => {\n          if (h === \"barcode\") {\n            allNth.push(a[n]);\n          } else {\n            if (isNaN(a[n])){\n              allNth.push(a[n]);\n            } else {\n              allNth.push(parseFloat(a[n]));\n            }\n          }\n        });\n\n        return allNth;\n      };\n\n      // reformat\n      this.header.forEach((h, i) => {\n        this.dataCite[h] = getNth(dMat.slice(1, dMat.length), i, h);\n      });\n\n      // get abs\n      const metaInfoTags = [\"barcode\", \"cluster\", \"tSNE_1\", \"tSNE_2\"];\n      const axisCols = _.filter(this.header, i => /^(xaxis|yaxis)/.test(i));\n      const clusterCols = _.filter(this.header, i => /^(cluster_)/.test(i));\n\n      this.abs = _.without(this.header, ...metaInfoTags.concat(axisCols, clusterCols));\n      this.absDisplayBool = Array(this.abs.length).fill(true);\n\n      // find available dim methods\n      this.dimMethods = _.chain(axisCols)\n        .map(x => x.replace(/^(xaxis|yaxis)_/, \"\"))\n        .uniq()\n        .value();\n\n      // set default dimMethod\n      this.dimMethodSel = this.dimMethods[0];\n\n      // save available cluster categories\n      this.clusterCategories = _.chain(clusterCols)\n        .map(x => x.replace(/^cluster_/, \"\"))\n        .uniq()\n        .value();\n\n      this.clusterCategoriesSel = this.clusterCategories[0];\n\n      // reformat to d3 friendly\n      const dataCiteKeys = Object.keys(this.dataCite);\n      for (let i = 0; i < this.dataCite[\"barcode\"].length; i++) {\n        const d = {};\n        dataCiteKeys.forEach(x => {\n          d[x] = this.dataCite[x][i];\n        });\n        this.orgDataClean.push(d);\n      }\n\n      // set default to full dataset\n      this.currentDataClean = [...Array(this.orgDataClean.length).keys()].map(i => i);\n\n      // precalculate d3 scales\n      this.abs.forEach(a => {\n        const minAb = _.min(this.dataCite[a]);\n        const maxAb = _.max(this.dataCite[a]);\n\n        // fill scale\n        this.fillScales[a] = d3\n          .scaleSequential(availInterpolators[this.expColorScaleSel])\n          .domain([minAb, maxAb]);\n      });\n\n\n      // precalculate cluster scale\n      for (const [i, d] of this.orgDataClean.entries()) {\n        for (const c of this.clusterCategories) {\n          const c_val = d[\"cluster_\" + c];\n          if (!(c in this.clusterCategoriesUniqVals)) {\n            this.clusterCategoriesUniqVals[c] = {};\n          }\n\n          if (c_val in this.clusterCategoriesUniqVals[c]) {\n            this.clusterCategoriesUniqVals[c][c_val].push(i);\n          } else {\n            this.clusterCategoriesUniqVals[c][c_val] = [i];\n          }\n        }\n      }\n\n      for (const c in this.clusterCategoriesUniqVals) {\n        this.clusterCategoriesScales[c] = d3.scaleOrdinal(d3.schemePaired).domain(Object.keys(this.clusterCategoriesUniqVals[c]));\n        this.clusterCategoriesUniqCols[c] = _.map(Object.keys(this.clusterCategoriesUniqVals[c]), (x) => this.clusterCategoriesScales[c](x));\n      }\n\n      // save other settings\n      this.cellsUsed = this.currentDataClean.length;\n\n      this.clusterCategoriesCurrentVals = Object.keys(this.clusterCategoriesUniqVals[this.clusterCategoriesSel])\n      this.selClusterTrack = this.clusterCategoriesCurrentVals.map((x,i)=>i);\n\n      this.makeMainScatter();\n\n      this.drawColorScaleLegend();\n\n      this.showSpinner = false;\n    },\n\n    selAbs() {\n      if (this.selAbs.length != 0) {\n        const expressionData = this.makeExpressionScatterData();\n        this.makeExpressionScatter(expressionData);\n      }\n    },\n\n    enableThresh() {\n      if (this.selAbs.length != 0) {\n        const expressionData = this.makeExpressionScatterData();\n        this.makeExpressionScatter(expressionData);\n      }\n    },\n\n    expThresh() {\n      if (this.selAbs.length != 0) {\n        const expressionData = this.makeExpressionScatterData();\n        this.makeExpressionScatter(expressionData);\n      }\n    },\n\n    dataPolyGate() {\n      if (this.orgDataClean.length == 0) {\n        return;\n      }\n\n      if (\n        this.dataPolyGate.length > 0 &&\n        this.polyGateXAb.length == 1 &&\n        this.polyGateYAb.length == 1\n      ) {\n        this.makePolyGateScatter();\n      }\n    },\n\n    polyGateXAb(newVal, prevVal) {\n      if (this.orgDataClean.length == 0) {\n        return;\n      }\n      this.polyGateXAb = this.checkPolyGateAb(prevVal, newVal);\n\n      if (this.dataPolyGate.length > 0 && this.polyGateYAb.length == 1) {\n        this.makePolyGateScatter();\n      }\n    },\n\n    polyGateYAb(newVal, prevVal) {\n      if (this.orgDataClean.length == 0) {\n        return;\n      }\n\n      this.polyGateYAb = this.checkPolyGateAb(prevVal, newVal);\n\n      if (this.dataPolyGate.length > 0 && this.polyGateXAb.length == 1) {\n        this.makePolyGateScatter();\n      }\n    },\n\n    absSearch() {\n      if (this.orgDataClean.length == 0) {\n        return;\n      }\n\n      if (this.absSearch === null || this.absSearch == \"\") {\n        this.absDisplayBool = Array(this.abs.length).fill(true);\n      } else {\n        this.absDisplayBool = _.map(this.abs, x => {\n          return x.toLowerCase().indexOf(this.absSearch.toLowerCase()) !== -1;\n        });\n      }\n    },\n\n    expColorScaleSel() {\n      Object.keys(this.fillScales).forEach(a => {\n        // fill scale\n        this.fillScales[a] = d3\n          .scaleSequential(availInterpolators[this.expColorScaleSel])\n          .domain(this.fillScales[a].domain());\n      });\n\n      this.drawColorScaleLegend();\n      if (this.selAbs.length > 0) {\n        const expressionData = this.makeExpressionScatterData();\n        this.makeExpressionScatter(expressionData);\n      }\n    }\n  },\n  methods: {\n    onFileChange(e) {\n      this.resetGraphs([\"#mainScatter\", \"#polyGateScatter\", \"#expressionScatter\"]);\n      if (e) {\n        this.showSpinner = true;\n\n        const reader = new FileReader();\n        reader.onload = event => {\n          this.dataFile = event.target.result;\n        };\n\n        reader.readAsText(e);\n      }\n    },\n\n    resetGraphs(nodeID) {\n      Object.assign(this.$data, this.$options.data.apply(this));\n\n      if (typeof(nodeID) == \"string\") {\n        d3.select(nodeID).selectAll(\"*\").remove();\n      } else if (Array.isArray(nodeID)) {\n        nodeID.forEach((x) => {\n          d3.select(x).selectAll(\"*\").remove();\n        })\n      }\n    },\n\n    makeMainScatter() {\n      const final_data = [\n        {\n          key: \"mainPlot\",\n          title: \"\",\n          type: \"cluster\",\n          values: _.map(this.currentDataClean, (i) => this.orgDataClean[i])\n        }\n      ];\n\n      const scatter = ScatterPlot()\n        .width(500)\n        .height(500)\n        .radius(1)\n        .xVar(\"xaxis_\" + this.dimMethodSel)\n        .yVar(\"yaxis_\" + this.dimMethodSel)\n        .xTitle(this.dimMethodSel + \" 1\")\n        .yTitle(this.dimMethodSel + \" 2\")\n        .constrainAxes(this.orgDataClean)\n        .fillVar(\"cluster_\" + this.clusterCategoriesSel)\n        .fillScale(this.clusterCategoriesScales[this.clusterCategoriesSel]);\n        // .legend(true);\n\n      const draw = () => {\n        const charts = d3\n          .select(\"#mainScatter\")\n          .selectAll(\".chart\")\n          .data(final_data);\n\n        charts\n          .enter()\n          .append(\"div\")\n          .attr(\"class\", \"chart\")\n          .merge(charts)\n          .call(scatter);\n\n        charts.exit().remove();\n\n        const brushG = d3.select(\"#clusterBrushG\");\n\n        if (brushG.empty()) {\n          const brush = d3.polybrush()\n            .x(scatter.xScale())\n            .y(scatter.yScale())\n            .on(\"start\", () => {\n              this.dataPolyGate = [];\n            })\n            .on(\"end\", () => {\n              this.updatePolyGate(brush, scatter.xScale(), scatter.yScale());\n            });\n\n          d3.select(\"#mainScatter\")\n            .select(\".scatterG\")\n            .append(\"g\")\n            .attr(\"id\", \"clusterBrushG\")\n            .call(brush);\n\n          this.polyGateBrush = brush;\n          this.mainScatterXScale = scatter.xScale();\n          this.mainScatterYScale = scatter.yScale();\n        }\n      };\n\n      draw();\n    },\n\n    updatePolyGate(brush, xScale, yScale) {\n      const dataTemp = [];\n      const xvar = \"xaxis_\" + this.dimMethodSel;\n      const yvar = \"yaxis_\" + this.dimMethodSel;\n\n      this.currentDataClean.forEach(i => {\n        const d = this.orgDataClean[i];\n\n        if (brush.isWithinExtent(xScale(d[xvar]), yScale(d[yvar]))) {\n          dataTemp.push(d);\n        }\n      });\n\n      this.dataPolyGate = dataTemp;\n    },\n\n    makeExpressionScatterData() {\n      const currentDataCleanExpression = _.map(this.selAbs, a => {\n        const d = {\n          type: \"expression\",\n          key: a,\n          title: this.abs[a],\n          fillScale: this.fillScales[this.abs[a]]\n        };\n\n        let data_ref = this.currentDataClean;\n        if (this.enableThresh) {\n          const currentDataCleanFilt = _.filter(this.currentDataClean, i => {\n            const d = this.orgDataClean[i];\n\n            return d[this.abs[a]] >= this.expThresh;\n          });\n\n          data_ref = currentDataCleanFilt;\n        }\n\n        const xaxis = \"xaxis_\" + this.dimMethodSel;\n        const yaxis = \"yaxis_\" + this.dimMethodSel;\n\n        d.values = _.map(data_ref, i => {\n          const d = this.orgDataClean[i];\n\n          const new_d = {\n            barcode: d.barcode,\n            ab: this.abs[a],\n            cluster: d.cluster,\n            expression: d[this.abs[a]]\n          };\n\n          new_d[xaxis] = d[xaxis];\n          new_d[yaxis] = d[yaxis];\n\n          return new_d;\n        });\n\n        return d;\n      });\n\n      return(currentDataCleanExpression)\n    },\n\n    makeExpressionScatter(expressionData) {\n      const scatter = ScatterPlot()\n        .width(275)\n        .height(275)\n        .radius(0.5)\n        .constrainAxes(this.orgDataClean)\n        .xVar(\"xaxis_\" + this.dimMethodSel)\n        .yVar(\"yaxis_\" + this.dimMethodSel)\n        .xTitle(this.dimMethodSel + \" 1\")\n        .yTitle(this.dimMethodSel + \" 2\");\n\n      const draw = function(data) {\n        const charts = d3\n          .select(\"#expressionScatter\")\n          .selectAll(\".chartexpressionScatter\")\n          .data(data, d => {\n            return d.key;\n          });\n\n        charts\n          .enter()\n          .append(\"div\")\n          .attr(\"class\", \"chartexpressionScatter\")\n          .merge(charts)\n          .call(scatter);\n\n        charts.exit().remove();\n      };\n\n      draw(expressionData);\n    },\n\n    checkPolyGateAb(prevVal, newVal) {\n      if (newVal.length > 1) {\n        if (newVal[0] == prevVal[0]) {\n          return [newVal[1]];\n        } else {\n          return [newVal[0]];\n        }\n      }\n\n      return newVal;\n    },\n\n    makePolyGateScatter() {\n      const final_data = [\n        {\n          key: \"polygate-\" + this.polyGateXAb[0] + this.polyGateYAb[0],\n          title: \"\",\n          type: \"cluster\",\n          values: this.dataPolyGate\n        }\n      ];\n\n      const scatter = ScatterPlot()\n        .width(400)\n        .height(400)\n        .radius(1.5)\n        .xVar(this.polyGateXAb[0])\n        .yVar(this.polyGateYAb[0])\n        .constrainAxes(this.orgDataClean)\n        .xTitle(this.polyGateXAb[0])\n        .yTitle(this.polyGateYAb[0])\n        .fillVar(\"cluster_\" + this.clusterCategoriesSel)\n        .fillScale(this.clusterCategoriesScales[this.clusterCategoriesSel]);\n\n      const draw = function(data) {\n        const charts = d3\n          .select(\"#polyGateScatter\")\n          .selectAll(\".polyGateScatter\")\n          .data(data, d => {\n            return d.key;\n          });\n\n        charts\n          .enter()\n          .append(\"div\")\n          .attr(\"class\", \"polyGateScatter\")\n          .merge(charts)\n          .call(scatter);\n\n        charts.exit().remove();\n      };\n\n      draw(final_data);\n    },\n\n    updateCells(event, { updatePolyGate = false, updateCluster = false } = {}) {\n      if (updateCluster) {\n        this.clusterCategoriesCurrentVals = Object.keys(this.clusterCategoriesUniqVals[this.clusterCategoriesSel]);\n        this.selClusterTrack = this.clusterCategoriesCurrentVals.map((x,i)=>i);\n      }\n\n      if (this.cellsUsed == this.orgDataClean.length) {\n        this.currentDataClean = [...Array(this.orgDataClean.length).keys()].map(i => i);\n      } else {\n        this.currentDataClean = this.genRandomIndices(this.cellsUsed, this.orgDataClean.length);\n      }\n\n      if (this.selClusterTrack.length != 0) {\n        const allowedCells = this.selClusterTrack.reduce((prev, current) => {\n          const clusterValue = this.clusterCategoriesCurrentVals[current]\n          prev = prev.concat(this.clusterCategoriesUniqVals[this.clusterCategoriesSel][clusterValue])\n          return(prev)\n        }, []);\n\n        this.currentDataClean = this.currentDataClean.filter(x => allowedCells.includes(x))\n      }\n\n\n      if (updatePolyGate && this.dataPolyGate.length > 0) {\n        this.dataPolyGate = [];\n        d3.select(\".polyGateScatter\").remove();\n        d3.select(\"#clusterBrushG\").remove();\n\n        d3.select(\"#mainScatter\")\n          .selectAll(\"circle\")\n          .classed(\"selected\", false);\n      } \n      \n      this.makeMainScatter();\n\n      const expressionData = this.makeExpressionScatterData();\n      this.makeExpressionScatter(expressionData);\n\n      if (\n        this.dataPolyGate.length > 0 &&\n        this.polyGateXAb.length == 1 &&\n        this.polyGateYAb.length == 1\n      ) {\n        this.updatePolyGate(this.polyGateBrush, this.mainScatterXScale, this.mainScatterYScale);\n      }\n    },\n\n    updateDimsAndCells(e) {\n      this.updateCells(e, {updatePolyGate: true});\n    },\n\n    updateClusterAndCells(e) {\n      this.updateCells(e, {updateCluster: true});\n    },\n\n    genRandomIndices(n, orgArrayLen) {\n      const arr = [];\n      while (arr.length < n){\n          const r = Math.floor(Math.random() * orgArrayLen);\n          if (arr.indexOf(r) === -1) {\n            arr.push(r);\n          }\n      }\n\n      return(arr);\n    },\n\n    clearAllExpScatter() {\n      if (this.selAbs.length > 0) {\n        this.selAbs = [];\n        const data = this.makeExpressionScatterData();\n        this.makeExpressionScatter(data);\n      }\n    },\n\n    drawColorScaleLegend() {\n      const canvasID = \"canvas-interpolate-legend\";\n      const canvasNode = document.getElementById(canvasID);\n      let canvasChart = null;\n\n      if (canvasNode === null) {\n        canvasChart = d3.select(\"#expColorLegend\").append('canvas')\n          .style(\"width\", \"250px\")\n          .style(\"height\", \"30px\")\n          .style(\"margin-top\", \"3px\")\n          .style(\"image-rendering\", \"pixelated\")\n          .attr(\"id\", canvasID);\n      } else {\n        canvasChart = d3.select(canvasNode);\n      }\n      const context = canvasChart.node().getContext('2d');\n\n      var scale = window.devicePixelRatio * 2;\n      canvasChart.node().width = 300 * scale;\n      canvasChart.node().height = 30 * scale;\n\n      context.scale(scale, scale);\n      context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n      const n = 512;\n      const color = d3.scaleSequential(availInterpolators[this.expColorScaleSel]);\n      const t = color.ticks(n)\n\n      for (let i = 0; i < t.length; ++i) {\n        context.fillStyle = color(t[i]);\n        context.fillRect(250 * i/t.length, 0, 250/t.length + 1, 30);\n      }\n    }\n  },\n};\n</script>\n\n<style>\n.title {\n  color: #455a64;\n}\n\n.axis line,\n.axis path {\n  fill: none;\n  stroke: #aeaeae;\n}\n.axis-title {\n  text-anchor: middle;\n  font-size: 12px;\n  color: #000;\n}\n.chart {\n  display: inline-block;\n}\n.chart-svg {\n  position: absolute;\n}\n.chartexpressionScatter {\n  display: inline-block;\n}\ncircle.selected {\n  fill: purple;\n}\n.ridgePlotExpression {\n  display: inline-block;\n}\ndiv.tooltip-donut {\n  position: absolute;\n  text-align: center;\n  padding: 0.5rem;\n  background: #ffffff;\n  color: #313639;\n  border: 1px solid #313639;\n  border-radius: 8px;\n  pointer-events: none;\n  font-size: 1.3rem;\n}\n.centered-input input {\n  text-align: center;\n}\n#antibody-list {\n  max-height: 50%;\n  overflow-y: auto;\n}\n#cluster-list {\n  max-height: 35%;\n  overflow-y: auto;\n}\n.v-file-input__text {\n  font-size: 14px;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=fa38a9f8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VAvatar,VBtn,VCard,VCardSubtitle,VCardText,VChip,VCol,VContainer,VDivider,VFileInput,VFooter,VIcon,VList,VListItem,VListItemContent,VListItemGroup,VListItemIcon,VListItemTitle,VMain,VNavigationDrawer,VProgressCircular,VRow,VSelect,VSlider,VSpacer,VSwitch,VTextField,VToolbarTitle})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify';\n\nVue.config.productionTip = false\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n"],"sourceRoot":""}